<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>d3.js</title>
    <script src="bower_components/d3/d3.min.js"></script>
    <link rel="stylesheet" href="css/main.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <div class="row" style="background-color: #CDDC39; color: white; margin-right: -30px; margin-left: -30px; padding-left: 30px;">
            <img src="./media/images/d3_logo.png" class="no-border pull-left" style="height: 100px; background: none;"/>
            <span class="pull-left text-left" style="margin-top: 20px; padding-left: 20px;">Lizzi Slivinski<br>
              <small>March 14, 2017</small>
            </span>
          </div>
          <iframe src="./gallery.html" style="width: 100%; height: 500px;" scrolling="no"></iframe>

        </section>

        <section>
          <h1>D3.js</h1>
          <hr>
          <p>
            <br>
            <a href="mailto:eslivinski@gmail.com"><i class="fa fa-fw fa-envelope-o" aria-hidden="true"></i> eslivinski@gmail.com</a><br>
            <a href="https://github.com/eSlivinski"><i class="fa fa-fw fa-github" aria-hidden="true"></i> @eslivinski</a><br>
            <a href="https://eslivinski.github.io/d3.js"><i class="fa fa-fw fa-slideshare" aria-hidden="true"></i> eslivinski.github.io/d3.js </a><br>
            <a href="./examples.html"><i class="fa fa-fw fa-codepen" aria-hidden="true"></i> eslivinski.github.io/d3.js/examples.html </a><br>

          </p>
        </section>

        <section>
          <div class="row">
            <div class="col-md-5">
              <img src="./media/images/d3_logo.png" class="no-border"/>
            </div>
            <div class="col-md-7">
              <h3 class="text-left">Today's Game Plan:</h3>
              <ol>
                <li> d3 background </li>
                <li> svg basics </li>
                <li> editing svgs with d3</li>
                <li> mapping with d3 </li>
              </ol>
            </div>
          </div>
        </section>

        <section>
          <img src="./media/images/d3_logo.png" class="no-border" style="max-height: 30vh;"/>
          <h2> =
            <span class="fragment highlight-orange highlight-bold" data-fragment-index="1">D</span>ata
            <span class="fragment highlight-orange highlight-bold" data-fragment-index="1">D</span>riven
            <span class="fragment highlight-orange highlight-bold" data-fragment-index="1">D</span>ocuments
          </h2>
          <aside class="notes">
            <ul>
              <li>D3 = Data Driven Documents</li>
              <li><strong>Document</strong> = DOM (Document Object Model)</li>
              <li>Basic idea = modify elements based on a dataset</li>
              <li>Not a wizard, but a tool that gives you the means to create vizualizations</li>
            </ul>
          </aside>
        </section>

        <section>
          <div class="row">
            <div class="col-md-5">
              <a href="https://bost.ocks.org/mike/">
                <img src="./media/images/bostock.jpg" class="img-rounded float-left"/>
              </a>
            </div>
            <div class="col-md-7">
              <ul>
                <li><em>Data Visualization Rock Star</em> &mdash;&nbsp;Nieman&nbsp;Lab</li>
                <li>Creator of:
                  <a href="https://d3js.org/">d3.js</a>,
                  <a href="https://github.com/topojson/topojson">topojson</a>,
                  <a href="https://bl.ocks.org/">bl.ocks.org</a>,
                  and many others
                </li>
                <li> Former Data Visualization Editor, New York Times </li>
                <li>
                  <a target="_blank" href="https://www.reddit.com/r/dataisbeautiful/comments/3k3if4/hi_im_mike_bostock_creator_of_d3js_and_a_former/">
                    <i class="fa fa-reddit" aria-hidden="true"></i>
                    Hi, I'm Mike Bostock
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <img src="./media/images/bostock-twitter.png" class="img-rounded"/>
        </section>

        <section class="huge-text">
          <h1>SVG</h1>
          <hr>
          <small>
            <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element">SVG Elements</a><br>
            <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute">SVG Attributes</a>
          </small>
          <aside class="notes">
            <ul>
              <li>SVG = Scaleable Vector Graphic</li>
              <li>XML based -> Looks like HTML</li>
              <li>You can export into svg format in Illustrator and Drop the contents of the file right into an HTML doc</li>
              <li>Can be used with CSS and animated with JS</li>
            </ul>
          </aside>
        </section>

        <section class="huge-text">
          <h1>Basic SVG Shapes </h1>
          <aside class="notes">
            <ul>
              <li>Go through some examples of SVG shapes so you can get a taste of what the general syntax for svg </li>
            </ul>
          </aside>
        </section>

        <section>
          <iframe src="//giphy.com/embed/Mp74NJoYgdAZi" width="480" height="349" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><br>
          <a href="./examples.html"><i class="fa fa-fw fa-codepen" aria-hidden="true"></i> eslivinski.github.io/d3.js/examples.html </a><br>
        </section>

        <section>
          <h3 class="title"> svg-basics <span class="title-divider">/</span> <span class="subtitle"> circles </span></h3>
          <svg width="100%" height="200">
            <circle cx="400" cy="150" r="20"></circle>
            <circle cx="100" cy="100" r="30" fill="blue" stroke="red"
              stroke-width="5"></circle>
          </svg>

          <pre class="html"><code>
  <!-- Require a width and a height -->
  <svg width="100%" height="200">
    <!-- Require a position and radius -->
    <circle cx="400" cy="150" r="20"></circle>
    <circle cx="100" cy="100" r="30" fill="blue"
      stroke="red"
      stroke-width="5"></circle>
  </svg>
          </code></pre>

          <small>
            <a href="http://codepen.io/eslivinski/pen/bqRZex" target="_blank">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/bqRZex
            </a>
          </small>

          <aside class="notes">
            <ul>
              <li> To define a circle you first need to give the SVG where the circle lives a width and height</li>
              <li> Then you need to give the circle a radius (r) and a position within the svg(cx &amp; cy or transform)</li>
              <li> <strong>Point out which is which</strong></li>
              <li> The position of a circle is relative to its center</li>
              <li> <strong>Open up developer tools and modify the attributes</strong></li>
            </ul>
          </aside>
        </section>

        <section>
          <h3 class="title"> svg-basics <span class="title-divider">/</span> <span class="subtitle">rectangles</span></h3>

          <svg width="100%" height="200">
            <rect x="100" y="100" width="50" height="50" fill="#654321"></rect>
            <rect transform="translate(600, 10)"
                  width="75" height="180"
                  fill="pink" fill-opacity="0.5"
                  stroke="pink" stroke-width="10"></rect>
          </svg>

          <pre class="html"><code>
  <svg width="100%" height="200">
    <!-- Require position, width, height -->
    <rect x="100" y="100" width="50" height="50" fill="#654321"></rect>
    <rect transform="translate(600, 10)"
          width="75" height="180"
          fill="pink" fill-opacity="0.5"
          stroke="pink" stroke-width="10"></rect>
  </svg>
          </code></pre>

          <small>
            <a href="http://codepen.io/eslivinski/pen/qrjGdw">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/qrjGdw
            </a>
          </small>

          <aside class="notes">
            <ul>
              <li> To define a rectangle you need to give it a width, height, and position
                <ul>
                  <li>The first rectangle uses x and y to give the position (similar to what we did for the circles) </li>
                  <li>The second uses the transform attribute and translates (moves) it to (600, 10) (x,y)</li>
                  <li> ANY svg element can use transform generally doesn't make a difference</li>
                  <li>The position of rectangle is relative to its top-right corner</li>
                </ul>
              </li>
              <li>Stroke position is always aligned so the middle of the stroke is in the middle of the svg element</li>
              <li>The position of the svg element does not include the stroke</li>
            </ul>
          </aside>
        </section>

        <section>
          <h3 class="title">svg-basics<span class="title-divider"> / </span><span class="subtitle">text</span></h3>
          <style>
            .myCustomClass {
              font-family: cursive;
              fill: green;
            }
          </style>
          <svg width="100%" height="200">
            <text x="100" y="80" fill="purple">Hello World</text>
            <text transform="translate(600, 150)" class="myCustomClass">Hooray SVGs</text>
          </svg>

          <pre class="html"><code>
  <!-- CSS can be used to modify to appearence of any SVG element -->
  <style>
    .myCustomClass {
      font-family: cursive;
      fill: green;
    }
  </style>
  <svg width="100%" height="200">
    <!-- Require a position (and words) -->
    <text x="100" y="80" fill="purple">Hello World</text>
    <text transform="translate(600, 150)" class="myCustomClass">Hooray SVGs</text>
  </svg>
          </code></pre>

          <small>
            <a href="http://codepen.io/eslivinski/pen/JWJqGz">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/JWJqGz
            </a>
          </small>

          <aside class="notes">
            <ul>
              <li> To define text you need to give a position and you will probably want to give it text too</li>
              <li> In this example you can see that just like rectangles, position can be set with x/y or transform </li>
              <li> Also in this example you can see an example of what I mentioned earlier about using CSS with svgs </li>
            </ul>
          </aside>
        </section>

        <section class="huge-text">
          <h1>Modifying SVGs <br>with d3.js</h1>
        </section>

        <section>
          <h3 class="title"> modifying-svgs<span class="title-divider"> / </span><span class="subtitle">d3.select, d3.attr </span></h3>

          <svg width="100%" height="200">
            <circle cx="100" cy="100" r="30" fill="blue"></circle>
          </svg>
          <pre class="javascript"><code>
  // STEP #1: Identify the element wish to modify
  var circle = d3.select('circle');

  // STEP #2: Use the attr method to change the element's fill
  // from blue to orange
  circle.attr('fill', 'orange');

          </code></pre>
          <small>
            <a href="http://codepen.io/eslivinski/pen/zZzQoy">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/zZzQoy
            </a>
          </small>

          <aside class="notes">
            <ul>
              <li><strong>Show in devtools what comes back from a selection</strong></li>
            </ul>
          </aside>
        </section>

        <section>
          <section>
            <h3 class="title">modifying-svgs<span class="title-divider"> / </span><span class="subtitle">d3.selectAll </span></h3>

            <svg width="100%" height="200">
              <circle cx="100" cy="100" r="30" fill="blue"></circle>
              <circle cx="400" cy="160" r="30" fill="blue"></circle>
            </svg>

            <pre class="javascript"><code>
  // Select will only grab the first element matches the selection
  d3.select('circle')
    .attr('fill', 'orange');

  // selectAll will grab all elements that match the description
  d3.selectAll('circle')
    .attr('fill', 'purple');

            </code></pre>

            <small>
              <a href="http://codepen.io/eslivinski/pen/GWEarq">
                <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
                codepen.io/eslivinski/pen/GWEarq
              </a>
            </small>

            <aside class="notes">
              <ul>
                <li><strong>Show in devtools what comes back from a selection</strong></li>
              </ul>
            </aside>
          </section>

            <section>
              <h3 class="title">Selectors</span></h3>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code> element</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <element></element> </code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  #id</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any id="id"></any></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  .class</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any class="class"></any></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  [attribute = "value"]</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any attribute="value"></any></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  parent > child</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <parent> <child></child> </parent></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  #ancestor  .descendent</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any id="ancestor">
    ...
      <any class="descendent"></any>
    ...
  </any> </code></pre> </div>
              </div>
            </section>

            <section>
              <h3 class="title">Selectors</span></h3>
              <hr>
              <div class="text-center practice">
                <foo id="bar"> Select Me </foo>
                <i class="fa fa-long-arrow-left" aria-hidden="true"></i>
                Practice Selecting This
              </div>
              <div class="col-md-2"></div>
              <div class="col-md-8">
                <pre class="html"><code>
  <foo id="bar">
    Select Me
  </foo>
                </code></pre>
                <pre class="javascript"><code>
  // Pure Javscript
  document.querySelector('foo#bar');

  // Jquery
  $('foo#bar');

  // d3
  d3.select('foo#bar');
                </code></pre>
              </div>
            </section>
        </section>

        <section class="huge-text">
          <h1>Animating SVGs</h1>
          <hr>
          <small>
            <a href="https://github.com/d3/d3/blob/master/API.md#transitions-d3-transition">#transitions-d3-transition</a>
          </small>
        </section>

        <section data-codeid="circle-1">
          <h3 class="title">animating-svgs<span class="title-divider"> / </span><span class="subtitle">d3.transition</span></h3>

          <svg width="100%" height="200">
            <circle cx="100" cy="100" r="30" fill="orange"></circle>
          </svg>

          <pre class="javascript"><code>
  // STEP #1: Make the circle bigger
  // Attr changes called after .transition will happen
  // gradually
  d3.select('circle')
    .transition()
    .attr('r', 100);

  // STEP #2: Make the circle purple as it moves to the right
  // If multiple attr changes occur after .transition they
  // happen at the same time
  d3.select('circle')
    .transition()
    .attr('cx', 500)
    .attr('fill', "purple");

  // STEP #3: Make the circle hot pink then make it smaller
  // Separating groups of attr changes with .transition
  // method calls will create stepped animations
  d3.select('circle')
    .transition()
    .attr('fill', '#E91E63')
    .transition()
    .attr('r', 10);

          </code></pre>

          <small>
            <a href="http://codepen.io/eslivinski/pen/jBwoaz">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/jBwoaz
            </a>
          </small>

        </section>

        <section class="huge-text">
          <h1>Data Binding</h1>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">d3.selection.data</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="10" fill="#E91E63"></circle>
          </svg>
          <div class="row">
            <div class="col-md-6">
              <pre class="javascript" style="width: 100%"><code>

  var my_data = [30];

  d3.select('circle')
    .data(my_data);

              </code></pre>
            </div>
            <div class="col-md-6">
              <img src="./media/images/circle-data.png" />
            </div>
          </div>

          <small>
            <a href="http://codepen.io/eslivinski/pen/zZzQRX">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/zZzQRX
            </a>
          </small>
        </section>

        <section class="huge-text">
          <div class="text-right">
            <iframe src="//giphy.com/embed/xT77Y36ijyuwn58bja" width="288" height="259" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
          </div>
          <h1>So what?</h1>
        </section>


        <section>
          <ol>
            <p><strong> Data-binding can help us define:</strong></p>
            <li>How elements should look on the page</li>
            <li>Which elements should be on the page</li>
          </ol>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">dynamic-attributes</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="10" fill="#E91E63"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  var my_data = [30]

  d3.select('circle')
    .data(my_data)
    .transition()
    .attr('r', function(d, i) {
      // whenever a function is passed into a method of
      // a d3 attribute function the first parameter (d)
      // always represents the data bound to that element
      // and the second (i) always represents the index
      // of that element in the selection
      return d;
    });
          </code></pre>

          <small>
            <a href="http://codepen.io/eslivinski/pen/NpgVYX">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/NpgVYX
            </a>
          </small>

        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">complex-data-models</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="30" fill="#E91E63"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  var my_data = [
    { stat_1: 100, stat_2: 50 }
  ];

  d3.select('circle')
    .data(my_data)
    .transition()
    .attr('r', function(d, i) {
      return d.stat_1;
    })
    .attr('fill', function(d, i) {
      if (d.stat_2 >= 100) {
        return 'red';
      } else {
        return 'blue';
      }
    });
          </code></pre>

          <small>
            <a href="http://codepen.io/eslivinski/pen/NpgVMX">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/NpgVMX
            </a>
          </small>

        </section>

        <section class="huge-text">
          <h1 > Creating <br>New <br>Elements</h1>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">d3.selection.data.enter</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="100" fill="blue"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  // Create elements by adding an additional data object
  var my_data = [
    { stat_1: 40, stat_2: 10 },
    { stat_1: 30, stat_2: 250 },
    { stat_1: 130, stat_2: 40 }
  ];

  // Have to adjust to our selection to first select the
  // container then select the child elements we are
  // interested in and to use selectAll
  // even though there is currently only one circle
  var circles= d3.select('svg')
    .selectAll('circle')
    .data(my_data);

  // Only Happens to the new circles
  var newCircles = circles.enter()
    .append('circle');

  // Update the definition of circles var to include
  // the new circles
  circles = circles.merge(newCircles)
    .attr('cy', 100)
    .attr('cx', function(d, i) {
      return (i+1) * 200;
    })
    .transition()
    .attr('r', function(d, i) {
      return d.stat_1;
    })
    .attr('fill', function(d, i) {
      if (d.stat_2 >= 100) {
        return 'red';
      } else {
        return 'blue';
      }
    });
          </code></pre>


          <small>
            <a href="http://codepen.io/eslivinski/pen/bqRyzL">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/bqRyzL
            </a>
          </small>
        </section>

        <section  class="huge-text">
          <h1>Removing Elements</h1>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">d3.selection.data.exit</span></h3>

          <svg width="100%" height="200">
            <circle cx="200" cy="100" r="40" fill="blue"></circle>
            <circle cy="100" cx="400" r="30" fill="red"></circle>
            <circle cy="100" cx="600" r="130" fill="blue"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  var my_data = [
    { stat_1: 150, stat_2: 300 },
    { stat_1: 30, stat_2: 115 }
  ];

  var circles = d3.select('svg')
    .selectAll('circle')
    .data(my_data);

  // Get rid of the extra circle
  circles.exit()
    .remove();

  // Won't be needed because the data is getting smaller
  // But we will include it for good measure
  var newCircles = circles.enter()
    .append('circle');

  circles.merge(newCircles)
    .attr('cy', 100)
    .attr('cx', function(d, i) {
      return (i+1) * 200;
    })
    .transition()
    .attr('r', function(d, i) {
      return d.stat_1;
    })
    .attr('fill', function(d, i) {
      if (d.stat_2 >= 100) {
        return 'red';
      } else {
        return 'blue';
      }
    });
          </code></pre>
          <small>
            <a href="http://codepen.io/eslivinski/pen/YZQbMp">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/YZQbMp
            </a>
          </small>
        </section>

        <section class="huge-text">
          <h1> Mapping With d3.js</h1>
        </section>

        <section>
          <img src="./media/images/map.svg" class="no-border"/>
          <small>
            <a href="http://codepen.io/eslivinski/pen/WpOqeK">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/WpOqeK
            </a>
          </small>
        </section>

        <section>
          { Plug Maptime }
        </section>
  </div>
</div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script src="bower_components/lodash/lodash.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          { src: 'plugin/markdown/marked.js' },
          { src: 'plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });

      // SCOPE D3 SELECTIONS TO THE CURRENT SLIDE
      var _d3 = _.cloneDeep(d3);
      _.extend(d3, {
        select: function(selector) {
          return _d3.select('section.present').select(selector);
        },
        selectAll: function (selector) {
          return _d3.select('section.present').selectAll(selector);
        }
      });

    </script>
  </body>
</html>
