<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>d3.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.7.3/d3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <link rel="stylesheet" href="css/main.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

        <section>
          <div class="row heading-row" style="">
            <img src="./media/images/d3_logo.png" class="no-border pull-left"/>
            <p class="pull-left text-left" style="">Lizzi Slivinski<br> <small>April 12, 2017</small> </p>
          </div>
          <iframe class="gallery" src="./gallery.html" scrolling="no"></iframe>
          <br>

          <small>
            <a href="https://eslivinski.github.io/d3.js"><i class="fa fa-fw fa-slideshare" aria-hidden="true"></i> eslivinski.github.io/d3.js </a><br>
            <a href="./examples.html"><i class="fa fa-fw fa-codepen" aria-hidden="true"></i> eslivinski.github.io/d3.js/examples.html </a>
          </small>

        </section>

        <section>
          <div class="row">
            <div class="col-xs-5">
              <img src="./media/images/d3_logo.png" class="no-border"/>
            </div>
            <div class="col-xs-7">
              <h3 class="text-left">Today's Game Plan:</h3>
              <ol>
                <li> d3 background </li>
                <li> svg basics </li>
                <li> editing svgs with d3</li>
                <li> mapping with d3 </li>
              </ol>
            </div>
          </div>
          <aside class="notes">
            <ul>
              <li>Will be working with d3.v4 in this demo</li>
              <li>Chrome devtools -- other browsers are fine if you are familiar with them</li>
              <li>Slides are online (hit S) to show speaker view and see the embarassingly large amount of notes I require</li>
            </ul>
          </aside>
        </section>

        <section>
          <img src="./media/images/d3_logo.png" class="no-border" style="max-height: 30vh;"/>
          <h2> =
            <span class="fragment highlight-orange highlight-bold" data-fragment-index="1">D</span>ata
            <span class="fragment highlight-orange highlight-bold" data-fragment-index="1">D</span>riven
            <span class="fragment highlight-orange highlight-bold" data-fragment-index="1">D</span>ocuments
          </h2>
          <aside class="notes">
            <ul>
              <li>D3 = Data Driven Documents</li>
              <li><strong>Document</strong> = DOM (Document Object Model)</li>
              <li>Basic idea = modify elements based on a dataset</li>
              <li>Not a wizard, but a tool that gives you the means to create vizualizations</li>
            </ul>
          </aside>
        </section>

        <section>
          <div class="row">
            <div class="col-md-5">
              <a href="https://bost.ocks.org/mike/">
                <img src="./media/images/bostock.jpg" class="img-rounded float-left"/>
              </a>
            </div>
            <div class="col-md-7">
              <ul>
                <li><em>Data Visualization Rock Star</em> &mdash;&nbsp;Nieman&nbsp;Lab</li>
                <li>Creator of:
                  <a href="https://d3js.org/">d3.js</a>,
                  <a href="https://github.com/topojson/topojson">topojson</a>,
                  <a href="https://bl.ocks.org/">bl.ocks.org</a>,
                  and many others
                </li>
                <li> Former Data Visualization Editor, New York Times </li>
                <li>
                  <a target="_blank" href="https://www.reddit.com/r/dataisbeautiful/comments/3k3if4/hi_im_mike_bostock_creator_of_d3js_and_a_former/">
                    <i class="fa fa-reddit" aria-hidden="true"></i>
                    Hi, I'm Mike Bostock
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <img src="./media/images/bostock-twitter.png" class="img-rounded"/>
          <aside class="notes">
            <ul>
              <li>Bostock leaves the NYTimes to work on opensource projects fulltime in 2015</li>
              <li> 1. D3 is hard </li>
              <li> 2. D3 has a crazy dedicated community</li>
              <li> --> Today we will focus on the basics so you can read/understand
                general concepts in d3, so you can interact with the d3 community.</li>
            </ul>
          </aside>
        </section>

        <section class="huge-text">
          <h1>SVG</h1>
          <hr>
          <small>
            <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element">SVG Elements</a><br>
            <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute">SVG Attributes</a>
          </small>
          <aside class="notes">
            <ul>
              <li>SVG = Scaleable Vector Graphic</li>
              <li>Similar to flash, accept instead of being compiled and run in a viewer, it uses open web standards</li>
              <li>... which means it can be used with CSS and animated with JS</li>
              <li>XML based -> Looks like HTML, but is made for graphics</li>
              <li>... so it is much faster and , but nonetheless you can pretty much just cut and past svg code into html docs</li>
              <li>But it is not a standin for the internet ->
                Pretty much anything can be drawn in SVG format</li>
              <li>... in fact, you can export into svg format in Illustrator and Drop the contents of the file right into an HTML doc</li>
            </ul>
          </aside>
        </section>

        <section class="huge-text">
          <h1>Basic SVG Shapes </h1>
          <aside class="notes">
            <ul>
              <li> In this next section we are going to go through some examples of SVG shapes so you can get a taste of what the general syntax for svg </li>
            </ul>
          </aside>
        </section>

        <section>
          <iframe src="//giphy.com/embed/Mp74NJoYgdAZi" width="480" height="349" frameBorder="0" class="giphy-embed" allowFullScreen></iframe><br>
          <a href="./examples.html"><i class="fa fa-fw fa-codepen" aria-hidden="true"></i> eslivinski.github.io/d3.js/examples.html </a><br>
        </section>

        <section>
          <h3 class="title"> svg-basics <span class="title-divider">/</span> <span class="subtitle"> circles </span></h3>
          <svg width="100%" height="200">
            <circle cx="400" cy="150" r="20"></circle>
            <circle cx="100" cy="100" r="30" fill="blue" stroke="red"
              stroke-width="5"></circle>
          </svg>

          <pre class="html"><code>
  <!-- Require a width and a height -->
  <svg width="100%" height="200">
    <!-- Require a position and radius -->
    <circle cx="400" cy="150" r="20"></circle>
    <circle cx="100" cy="100" r="30" fill="blue"
      stroke="red"
      stroke-width="5"></circle>
  </svg>
          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/bqRZex" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/bqRZex
          </a>

          <aside class="notes">
            <ul>
              <li> To define a circle you first need to give the SVG where the circle lives a width and height</li>
              <li> Then you need to give the circle a radius (r) and a position within the svg (cx &amp; cy or transform)</li>
              <li> <strong class="instructions">Point out which is which</strong></li>
              <li> The position of a circle is relative to its center</li>
              <li> <strong class="instructions">Open up developer tools and modify the attributes</strong></li>
            </ul>
          </aside>
        </section>

        <section>
          <h3 class="title"> svg-basics <span class="title-divider">/</span> <span class="subtitle">rectangles</span></h3>

          <svg width="100%" height="200">
            <rect x="100" y="100" width="50" height="50" fill="#654321"></rect>
            <rect transform="translate(600, 10)"
                  width="75" height="180"
                  fill="pink" fill-opacity="0.5"
                  stroke="pink" stroke-width="10"></rect>
          </svg>

          <pre class="html"><code>
  <svg width="100%" height="200">
    <!-- Require position, width, height -->
    <rect x="100" y="100" width="50" height="50" fill="#654321"></rect>
    <rect transform="translate(600, 10)"
          width="75" height="180"
          fill="pink" fill-opacity="0.5"
          stroke="pink" stroke-width="10"></rect>
  </svg>
          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/qrjGdw" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/qrjGdw
          </a>

          <aside class="notes">
            <ul>
              <li> To define a rectangle you need to give it a width, height, and position
                <ul>
                  <li>The first rectangle uses x and y to give the position (similar to what we did for the circles) </li>
                  <li>The second uses the transform attribute and translates (moves) it to (600, 10) (x,y)</li>
                  <li> ANY svg element can use transform generally doesn't make a difference</li>
                  <li>The position of rectangle is relative to its top-right corner</li>
                </ul>
              </li>
              <li>Stroke position is always aligned so the middle of the stroke is in the middle of the svg element</li>
              <li>The position of the svg element does not include the stroke</li>
            </ul>
          </aside>
        </section>

        <section>
          <h3 class="title">svg-basics<span class="title-divider"> / </span><span class="subtitle">text</span></h3>
          <style>
            .myCustomClass {
              font-family: cursive;
              fill: green;
            }
          </style>
          <svg width="100%" height="200">
            <text x="100" y="80" fill="purple">Hello World</text>
            <text transform="translate(600, 150)" class="myCustomClass">Hooray SVGs</text>
          </svg>

          <pre class="html"><code>
  <!-- CSS can be used to modify to appearence of any SVG element -->
  <style>
    .myCustomClass {
      font-family: cursive;
      fill: green;
    }
  </style>
  <svg width="100%" height="200">
    <!-- Require a position (and words) -->
    <text x="100" y="80" fill="purple">Hello World</text>
    <text transform="translate(600, 150)" class="myCustomClass">Hooray SVGs</text>
  </svg>
          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/JWJqGz" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/JWJqGz
          </a>

          <aside class="notes">
            <ul>
              <li> To define text you need to give a position and you will probably want to give it text too</li>
              <li> In this example you can see that just like rectangles, position can be set with x/y or transform </li>
              <li> Also in this example you can see an example of what I mentioned earlier about using CSS with svgs </li>
            </ul>
          </aside>
        </section>

        <section class="huge-text">
          <h1>Modifying SVGs <br>with d3.js</h1>
        </section>

        <section>
          <h3 class="title"> modifying-svgs<span class="title-divider"> / </span><span class="subtitle">general-ideas</span></h3>

          <svg width="960" height="300">
            <g data-fragment-index="2" class="fragment fade-out">
              <circle cx="180" cy="250" r="40" fill="#CDDC39"></circle>
              <circle cx="480" cy="250" r="40" fill="#00BCD4"></circle>
              <circle cx="780" cy="250" r="40" fill="#FF5722"></circle>
            </g>
            <g data-fragment-index="2" class="fragment">
              <g data-fragment-index="3" class="fragment fade-out">
                <circle cx="180" cy="250" r="40" fill="#CDDC39" stroke="black" stroke-width="1"></circle>
                <circle cx="480" cy="250" r="40" fill="#00BCD4" stroke="black" stroke-width="1"></circle>
                <circle cx="780" cy="250" r="40" fill="#FF5722" stroke="black" stroke-width="1"></circle>
              </g>
            </g>
            <g data-fragment-index="3" class="fragment">
              <circle cx="180" cy="100" r="100" fill="#CDDC39" stroke="black" stroke-width="1"></circle>
              <circle cx="480" cy="100" r="100" fill="#00BCD4" stroke="black" stroke-width="1"></circle>
              <circle cx="780" cy="100" r="100" fill="#FF5722" stroke="black" stroke-width="1"></circle>
            </g>
          </svg>

          <span data-fragment-index="1" class="fragment">
            <pre class="javascript fragment fade-out" data-fragment-index="2"><code>
  // SELECT ITEMS TO MANIPULATE
  var circles = d3.selectAll('circle');
          </code></pre>
        </span>

        <span data-fragment-index="2" class="fragment">
          <pre data-fragment-index="3" class="fragment fade-out javascript"><code>
  var circles = d3.selectAll('circle');

  // DEFINE PROPERTIES AND ATTRIBUTES TO MODIFY
  circles.attr('stroke', 'black');
  circles.attr('stroke-width', 1);
          </code></pre>
        </span>

          <pre data-fragment-index="3" class="fragment javascript"><code>
  var circles = d3.selectAll('circle');

  // CHAINING METHODS
  circles
    .attr('stroke', 'black')
    .attr('stroke-width', 1)
    .attr('radius', 100)
    .attr('cy', 100);
          </code></pre>

          <aside class="notes">
            <p class="instructions">I want to quickly go over some general concepts in the "d3-approach" to modifying svgs and JS in general,
              as it is pretty different than the way most JS libs do things.</p>
            <ol>
              <li>Selecting items to manipulate. (Defining our selection)
                <ul>
                  <li> d3 gives us 2 methods to do this (select and selectAll) -- we will go over in more detail later</li>
                  <li> because we have 3 circles here I am use selectAll </li>
                </ul>
              </li>
              <li> Define properties/ attrs to modify
                <ul>
                  <li> use the attr method to change an attribute</li>
                  <li> 1st param = the attr we want to modify </li>
                  <li> 2nd param = the value we want to set this property to (can be a static value or a function that returns a value) </li>
                </ul>
              </li>
            </ol>
            <li> Chaining methods
              <ul>
                <li> Typically we will see a d3 with a long list of methods stacked up</li>
                <li> We can write d3 in this way because each method is returning the selection</li>
              </ul>
            </li>
          </aside>
        </section>

        <section>
          <h3 class="title"> modifying-svgs<span class="title-divider"> / </span><span class="subtitle">d3.select, d3.attr </span></h3>

          <svg width="100%" height="200">
            <circle cx="100" cy="100" r="30" fill="blue"></circle>
          </svg>
          <pre class="javascript"><code>
  // STEP #1: Identify the element wish to modify
  var circle = d3.select('circle');

  // STEP #2: Use the attr method to change the element's fill
  // from blue to orange
  circle.attr('fill', 'orange');

          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/zZzQoy" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/zZzQoy
          </a>

          <aside class="notes">
            <ul>
              <li>Need to tell d3 what we are interested in modifying - here we are using .select, b/c we only have one circle</li>
              <li>Similar to document.querySelector or the $ in jQuery -> returns a the objects that match that css selector</li>
              <li><strong class="instructions">Show in devtools what comes back from a selection</strong></li>
            </ul>
          </aside>
        </section>

        <section>
          <section>
            <h3 class="title">modifying-svgs<span class="title-divider"> / </span><span class="subtitle">d3.selectAll </span></h3>

            <svg width="100%" height="200">
              <circle cx="100" cy="100" r="30" fill="blue"></circle>
              <circle cx="400" cy="160" r="30" fill="blue"></circle>
            </svg>

            <pre class="javascript"><code>
  // Select will only grab the first element matches the selection
  d3.select('circle')
    .attr('fill', 'orange');

  // selectAll will grab all elements that match the description
  d3.selectAll('circle')
    .attr('fill', 'purple');

            </code></pre>

            <a href="http://codepen.io/eslivinski/pen/GWEarq" class="code-link" target="_blank">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/GWEarq
            </a>

            <aside class="notes">
              <ul>
                <li><strong>Show in devtools what comes back from a selection</strong></li>
              </ul>
            </aside>
          </section>

            <section>
              <h3 class="title">Selectors</span></h3>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code> element</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <element></element> </code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  #id</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any id="id"></any></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  .class</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any class="class"></any></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  [attribute = "value"]</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any attribute="value"></any></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  parent > child</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <parent> <child></child> </parent></code></pre> </div>
              </div>
              <div class="row">
                <div class="col-sm-4"> <pre class="css"><code>  #ancestor  .descendent</code></pre> </div>
                -->
                <div class="col-sm-7 pull-right"> <pre class="html"><code>  <any id="ancestor">
    ...
      <any class="descendent"></any>
    ...
  </any> </code></pre> </div>
              </div>
            </section>

            <section>
              <h3 class="title">Selectors</span></h3>
              <hr>
              <div class="text-center practice">
                <foo id="bar"> Select Me </foo>
                <i class="fa fa-long-arrow-left" aria-hidden="true"></i>
                Practice Selecting This
              </div>
              <div class="col-md-2"></div>
              <div class="col-md-8">
                <pre class="html"><code>
  <foo id="bar">
    Select Me
  </foo>
                </code></pre>
                <pre class="javascript"><code>
  // Pure Javscript
  document.querySelector('foo#bar');

  // Jquery
  $('foo#bar');

  // d3
  d3.select('foo#bar');
                </code></pre>
              </div>
            </section>
        </section>

        <section class="huge-text">
          <h1>Animating SVGs</h1>
          <hr>
          <small>
            <a href="https://github.com/d3/d3/blob/master/API.md#transitions-d3-transition">#transitions-d3-transition</a>
          </small>
        </section>

        <section data-codeid="circle-1">
          <h3 class="title">animating-svgs<span class="title-divider"> / </span><span class="subtitle">d3.transition</span></h3>

          <svg width="100%" height="200">
            <circle cx="100" cy="100" r="30" fill="orange"></circle>
          </svg>

          <pre class="javascript"><code>
  // STEP #1: Make the circle bigger
  // Attr changes called after .transition will happen
  // gradually
  d3.select('circle')
    .transition()
    .attr('r', 100);

  // STEP #2: Make the circle purple as it moves to the right
  // If multiple attr changes occur after .transition they
  // happen at the same time
  d3.select('circle')
    .transition()
    .attr('cx', 500)
    .attr('fill', "purple");

  // STEP #3: Make the circle hot pink then make it smaller
  // Separating groups of attr changes with .transition
  // method calls will create stepped animations
  d3.select('circle')
    .transition()
    .attr('fill', '#E91E63')
    .transition()
    .attr('r', 10);

          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/jBwoaz" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/jBwoaz
          </a>

        </section>

        <section class="huge-text">
          <h1>Data Binding</h1>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">d3.selection.data</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="10" fill="#E91E63"></circle>
          </svg>
          <div class="row">
            <div class="col-md-6">
              <pre class="javascript" style="width: 100%"><code>

  var my_data = [30];

  d3.select('circle')
    .data(my_data);

              </code></pre>
            </div>
            <div class="col-md-6">
              <img src="./media/images/circle-data.png" />
            </div>
          </div>

          <a href="http://codepen.io/eslivinski/pen/zZzQRX" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/zZzQRX
          </a>
        </section>

        <section class="huge-text">
          <div class="text-right">
            <iframe src="//giphy.com/embed/xT77Y36ijyuwn58bja" width="288" height="259" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
          </div>
          <h1>So what?</h1>
        </section>


        <section>
          <ol>
            <p><strong> Data-binding can help us define:</strong></p>
            <li>How elements should look on the page</li>
            <li>Which elements should be on the page</li>
          </ol>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">dynamic-attributes</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="10" fill="#E91E63"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  var my_data = [30]

  d3.select('circle')
    .data(my_data)
    .transition()
    .attr('r', function(d, i) {
      // whenever a function is passed into a method of
      // a d3 attribute function the first parameter (d)
      // always represents the data bound to that element
      // and the second (i) always represents the index
      // of that element in the selection
      return d;
    });
          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/NpgVYX" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/NpgVYX
          </a>

        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">complex-data-models</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="30" fill="#E91E63"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  var my_data = [
    { stat_1: 100, stat_2: 50 }
  ];

  d3.select('circle')
    .data(my_data)
    .transition()
    .attr('r', function(d, i) {
      return d.stat_1;
    })
    .attr('fill', function(d, i) {
      if (d.stat_2 >= 100) {
        return 'red';
      } else {
        return 'blue';
      }
    });
          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/NpgVMX" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/NpgVMX
          </a>

        </section>

        <section class="huge-text">
          <h1>Creating <br>New <br>Elements</h1>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">d3.selection.data.enter</span></h3>

          <svg width="100%" height="200">
            <circle cx="500" cy="100" r="100" fill="blue"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  // Create elements by adding an additional data object
  var my_data = [
    { stat_1: 40, stat_2: 10 },
    { stat_1: 30, stat_2: 250 },
    { stat_1: 130, stat_2: 40 }
  ];

  // Have to adjust to our selection to first select the
  // container then select the child elements we are
  // interested in and to use selectAll
  // even though there is currently only one circle
  var circles = d3.select('svg')
    .selectAll('circle')
    .data(my_data);

  // Only Happens to the new circles
  var newCircles = circles.enter()
    .append('circle');

  // Update the definition of circles var to include
  // the new circles
  circles = circles.merge(newCircles)
    .attr('cy', 100)
    .attr('cx', function(d, i) {
      return (i+1) * 200;
    })
    .transition()
    .attr('r', function(d, i) {
      return d.stat_1;
    })
    .attr('fill', function(d, i) {
      if (d.stat_2 >= 100) {
        return 'red';
      } else {
        return 'blue';
      }
    });
          </code></pre>


          <a href="http://codepen.io/eslivinski/pen/bqRyzL" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/bqRyzL
          </a>

          <aside class="notes">
            <p>What happens if there are more items in our array then on the page?</p>
            <p>By making some adjustments to our code we can actually add el to the page to match the array</p>
            <ol>
              <li> <code>.select('svg').selectAll('circle')</code>
                <ul>
                  <li>Like .attr, the select/selectAll are chainable</li>
                  <li>When we use select followed by selectAll we are effectively defining a parent and its children</li>
                  <li>This is necessary if we are going to add new items because we have to tell d3 where to put them</li>
                </ul>
              </li>
              <li><code>.enter().append</code>
                <ul>
                  <li>After binding datat to <code>circles</code>, we are defububg another var <code>newCircles = circles.enter().append('circle')</code></li>
                  <li>What this is saying is for all the items in the array that don't don't have a matching element in the DOM, add a new circle to the svg</li>
                  <li>Specifically, <code>.enter()</code> selects the elements that are going to be added &amp; ...</li>
                  <li><code>.append</code> adds a new element. -- the value passed into the append method defines what kind of element to add</li>
                  <li><strong>Open dev tools to show new elements</strong></li>
                  <li>We could do other stuff in this code block too, but it would only happen to our new circles</li>
                </ul>
              </li>
              <li><code>circles = circles.merge(newCircles)</code>
                <ul>
                  <li>Here we are updating our definition of circles to include the newCircles we just added, then setting attr for them</li>
                  <li><code>.attr('cx', function(d, i) { return (i+1) * 200; })</code>
                    <ul>
                      <li>js arrays are "zero indexed", meaining <code> var firstItem = someArray[0]; var secondItem = someArray[1];</code></li>
                      <li>if we remember that the "i" param passed into our attr function = index, then we see that this evaluates to [200, 400, 600]</li>
                      <li>this is a very common way to structure code in d3 when arranging items</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ol>
          </aside>
        </section>

        <section  class="huge-text">
          <h1>Removing Elements</h1>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle">d3.selection.data.exit</span></h3>

          <svg width="100%" height="200">
            <circle cx="200" cy="100" r="40" fill="blue"></circle>
            <circle cy="100" cx="400" r="30" fill="red"></circle>
            <circle cy="100" cx="600" r="130" fill="blue"></circle>
          </svg>

          <pre class="javascript" style="width: 100%"><code>
  var my_data = [
    { stat_1: 150, stat_2: 300 },
    { stat_1: 30, stat_2: 115 }
  ];

  var circles = d3.select('svg')
    .selectAll('circle')
    .data(my_data);

  // Get rid of the extra circle
  circles.exit()
    .remove();

  // Won't be needed because the data is getting smaller
  // But we will include it for good measure
  var newCircles = circles.enter()
    .append('circle');

  circles.merge(newCircles)
    .attr('cy', 100)
    .attr('cx', function(d, i) {
      return (i+1) * 200;
    })
    .transition()
    .attr('r', function(d, i) {
      return d.stat_1;
    })
    .attr('fill', function(d, i) {
      if (d.stat_2 >= 100) {
        return 'red';
      } else {
        return 'blue';
      }
    });
          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/YZQbMp" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/YZQbMp
          </a>

          <aside class="notes">
            <p>What happens if there are more el in the DOM than in the array?</p>
            <p>Again, by making some adjustments to our code we can actually add el to the page to match the array</p>
            <ol>
              <li> <code>circles.exit().remove();</code>
                <ul>
                  <li>Similar to <code>.enter()</code>, <code>.exit()</code> selects all the items on the page that don't have matching items in the array and therefore are presumeably leaving</li>
                  <li><code>.remove()</code> deletes the elments in this subset</li>
                </ul>
              </li>
            </ol>
            <p>You might notice that I left the code we added in the last step.
              This is because, together these to codeblocks exemplify the 'insert, update, delete' code structure of d3.
              This is a pretty advanced concept (horray you did it!), but it allows us to basically throw anything into the array and see it represented in our svg.
            </p>

          </aside>
        </section>
        </section>

        <section>
          <h3 class="title">data-binding<span class="title-divider"> / </span><span class="subtitle"> selecting-things-that-don't-exist </span></h3>

          <svg width="100%" height="200"></svg>

          <pre class="javascript" style="width: 100%"><code>
  var my_data = [
    { stat_1: 40, stat_2: 10 },
    { stat_1: 30, stat_2: 250 },
    { stat_1: 130, stat_2: 40 }
  ];

  // This looks like craziness, because there are no circles in the svg
  // but we are essentially creating a placeholder for circles
  // and handling the possibility that there might be circles
  var circles = d3.select('svg')
    .selectAll('circle')
    .data(my_data);

  var newCircles = circles.enter()
    .append('circle');

  circles.exit()
    .remove();

  circles = circles.merge(newCircles)
    .attr('cy', 100)
    .attr('cx', function(d, i) {
      return (i+1) * 200;
    })
    .transition()
    .attr('r', function(d, i) {
      return d.stat_1;
    })
    .attr('fill', function(d, i) {
      if (d.stat_2 >= 100) {
        return 'red';
      } else {
        return 'blue';
      }
    });
          </code></pre>

          <a href="http://codepen.io/eslivinski/pen/MmWYXy" class="code-link" target="_blank">
            <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
            codepen.io/eslivinski/pen/MmWYXy
          </a>
        </section>

        <section class="huge-text">
          <h1> Mapping With d3.js</h1>
        </section>

        <section>
          <section>
            <img src="./media/images/map.svg" class="no-border"/>

            <a href="http://codepen.io/eslivinski/pen/WpOqeK" class="code-link" target="_blank">
              <i class="fa fa-fw fa-codepen" aria-hidden="true"></i>
              codepen.io/eslivinski/pen/WpOqeK
            </a>
            <aside class="notes">
              <ol>
                <li> Defining the SVG
                  <ul>
                    <li>Unlike the other examples we have gone through, we are starting from complete scratch and need to define the SVG and all the things we want to put in it.</li>
                    <li>Similar to what we did when we added the circles in a previous example we create the SVG by selecting the parent container where we want the SVG inserted (<code>d3.select("body")</code>)... </li>
                    <li>...then add the svg using <code>.append("svg")</code></li>
                    <li>...finally, we set the width and the height attrs to create space for our map.
                  </ul>
                </li>
                <li> Projection
                  <li> In cartography a projection is the way you go from a round globe to a flat map (the way you peel the orange)... </li>
                  <li> In d3 a projection is the exact same thing, but that strategy for going from round to flat is expressed as a js function </li>
                  <li> Function takes an array of coords ([lng, lat]) and returns an array of coords within our svg</li>
                  <li> Lots of built in projections, plus the ability to add custom definitions. </li>
                </li>
                 <li> Path
                   <li> Seeing as our projection function only takes one array of coords at a time, we will want to use a path generator to more efficiently project geojson polygons and lines.</li>
                   <li> Path generators take in geojsons and return projected coordinates expressed in an svg path (ie. d)</li>
                </li>
                <li> Data URL
                  <li>To make things easy for codepen I am hosting the geojson of the US on github</li>
                  <li>If you open the url in your browser you will see it is just a geojson</li>
                </li>
                <li> D3.JSON
                  <li> Since we are loading this json file from somewhere outside of this JS file we need to request the file using d3.json</li>
                  <li> D3.json takes 2 params
                    <ol>
                      <li>Url of our data</li>
                      <li>Callback function (What to do when d3 is done going out and grabbing our dataset)
                        <ul>
                          <li> 2 param (err and data)</li>
                          <li> err - if all goes according to plan, we don't have to worry about this, but if there is an issue loadingour dataset
                            d3 will send that issue back in this 1st param.</li>
                          <li> data - the data we were looking for</li>
                          <li> We have to work with our data within the scope of this callback function, because there is no telling how long it will take
                            our request to actually retrieve the data (like all AJAX calls d3.json is handled asynchronously)</li>
                        </ul>
                      </li>
                    </ol>
                  </li>
                </li>
                <li>Defining states
                  <ul>
                    <li><code>var states = svg.selectAll("path").data(geojson.features).enter().append("path")</code></li>
                    <li>Using our "selecting things that don't exist" strategy to bind our geojson data to our states</li>
                  </ul>
                </li>
                <li> Drawing states
                  <ul>
                    <li><code>.attr("d", path)</code></li>
                    <li> We want to use our geo path function to define the d property of our states. Since attr accepts a function and
                      will pass the states' data into the first param of that function we can write it like this.
                    </li>
                    <li><code>.attr("d", function(d) { return path(d); })</code> works too.</li>
                </li>
                <li> Styling states
                  <ul>
                    <li> Adding the states class, which will define the stroke color. </li>
                    <li> Setting the fill property based on the the states' <code>properties.stat_1</code></li>
                  </ul>
                </li>
              </ol>
            </aside>
          </section>

          <section>
            <h3 class="title">Drawing complex SVG shapes <span class="title-divider"> / </span><span class="subtitle"> SVG Paths </span></h3>
            <img src="./media/images/sonic.svg" class="no-border"/>
            <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths" class="code-link" target="_blank">
              SVG Paths
            </a>
          </section>
        </section>

        <section>
          <h2>Lizzi Slivinski</h2>
          <p>
            <a href="mailto:eslivinski@gmail.com"><i class="fa fa-fw fa-envelope-o" aria-hidden="true"></i> eslivinski@gmail.com</a><br>
            <a href="https://github.com/eSlivinski"><i class="fa fa-fw fa-github" aria-hidden="true"></i> @eslivinski</a><br>
          </p>
        <br>
        <br>
        <div class="row heading-row">
          <p>
            <a href="https://eslivinski.github.io/d3.js"><i class="fa fa-fw fa-slideshare" aria-hidden="true"></i> eslivinski.github.io/d3.js </a><br>
            <a href="./examples.html"><i class="fa fa-fw fa-codepen" aria-hidden="true"></i> eslivinski.github.io/d3.js/examples.html </a>
          </p>
        </div>
        </section>

        <section data-background-image="media/images/maptime.png" data-background-size="contain"></section>
  </div>
</div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          { src: 'plugin/markdown/marked.js' },
          { src: 'plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });

      // SCOPE D3 SELECTIONS TO THE CURRENT SLIDE
      var _d3 = _.cloneDeep(d3);
      _.extend(d3, {
        select: function(selector) {
          return _d3.select('section.present').select(selector);
        },
        selectAll: function (selector) {
          return _d3.select('section.present').selectAll(selector);
        }
      });

      function resizeCode (e) {
        var slide = _d3.select(e.currentSlide),
            codeBlocks = slide.select('pre code.hljs')
            remainingHeight = slide.node().offsetHeight;

        if (codeBlocks.size()) {
          slide.selectAll(function() { return this.childNodes; })
          .each(function() { remainingHeight -= (this.offsetHeight||0); });

          codeBlocks.attr('style', 'max-height:' + remainingHeight/codeBlocks.size() + 'px');
        }
      }
      //
      Reveal.addEventListener( 'ready', function(e) {
        Reveal.addEventListener( 'slidechanged', resizeCode);
        setTimeout(function() {
          resizeCode(e);
        },2000);
      });
    </script>
  </body>
</html>
